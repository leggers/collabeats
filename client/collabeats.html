<head>
  <title>collabeats</title>
</head>

<body>
  {{> layout}}
</body>

<template name="layout">
  <div class='container' id='top-div'>
    <h1>Collabeats</h1>
    {{#if render}}
      {{> room}}
      {{> channels}}
    {{/if}}
    <div class='loop-indicator'></div>
  </div>
</template>

<template name='room'>
  {{#if room}}
    {{#with room}}
      <div class='fixed-wrap'>
        <div class='room-controls'>

          <button value="Start Loop" id='play' class='btn btn-default'>
            {{#unless looping}}
              <span class='glyphicon glyphicon-play'></span>
            {{else}}
              <span class='glyphicon glyphicon-stop'></span>
            {{/unless}}
          </button>

          <div class="btn-group">
            <button type="button" class="btn btn-default" id='slower'><span class='glyphicon glyphicon-chevron-down' </button>
            <button type="button" class="btn btn-default" id='tempo'>{{tempo}}</button>
            <button type="button" class="btn btn-default" id='faster'><span class='glyphicon glyphicon-chevron-up' </button>
          </div>

          <!-- <input type='text' value='{{name}}' id='room-name'/> -->

          <button id='clear' class='btn btn-warning'>Clear All</button>

        </div>
      </div>
    {{/with}}
  {{/if}}
</template>

<template name='channels'>
  <div class='channels'>
    {{#each channels}}
      <div class='channel'>
        <div class='channel-controls'>
          {{name}}
          <div class='btn-group'>
            <div class='dropdown-toggle', data-toggle='dropdown'>
              <span class='glyphicon glyphicon-remove-circle'></span>
            </div>
            <ul class='dropdown-menu' role='menu'>
              <li><a class='clear-row'>Clear Row</a></li>
              <!-- <li><a>Remove Channel</a></li> -->
            </ul>
          </div>
        </div>
        <div class='step-container'>
          {{#isolate}}
            {{#each stepIds}}
              {{> step}}
            {{/each}}
          {{/isolate}}
        </div>
      </div>
    {{/each}}
  </div>
</template>

<template name='step'>
  {{#with getStep this}}
    <div class='step{{#if active}} active{{else}} inactive{{/if}}' id='{{_id}}'></div>
  {{/with}}
</template>